
{
  "rules": {
    ".read": false,
    ".write": false,
    "app": {
      "apiKey": {
        // Only server-side authenticated requests can read/write the API key.
        // This is implicitly handled by using the Admin SDK or database secrets in server code.
        ".read": "auth != null",
        ".write": "auth != null"
      },
      "switchStates": {
        // Any authenticated user (including anonymous users from the web app) can read/write switch states.
        ".read": "auth != null",
        ".write": "auth != null"
      },
      "energyData": {
        // The API route (server) will write this data. It authenticates with a secret.
        // The client (authenticated user) can read it.
        ".read": "auth != null",
        ".write": false, // Only the server should write here. We will allow this via REST.
        "$pushId": {
          ".write": true // Allow the server to push new data.
        }
      }
    }
  }
}
